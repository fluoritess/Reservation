<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>无标题文档</title>
        <!--<link rel="stylesheet" href="//res.layui.com/layui/dist/css/layui.css"  media="all">-->
        <link href="../../layui/css/layui.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="../../layui/layui.js" charset="utf-8">

        </script>
        <script type="text/javascript" src="../js/jquery.js"></script>
        <style type="text/css">
            .content{
                width: 600px;
            }

        </style>
    </head>
    <body>
    <div class="content">
    <form class="layui-form" action="">
        <!--<div class="layui-form-item">-->
            <!--<label class="layui-form-label">输入框</label>-->
            <!--<div class="layui-input-block">-->
                <!--<input type="text" name="title" required  lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">-->
            <!--</div>-->
        <!--</div>-->
        <div class="layui-form-item">
            <label class="layui-form-label">名称</label>
            <div class="layui-input-inline">
                <input type="text" name="password" required lay-verify="required" placeholder="请输入名称" autocomplete="off" class="layui-input" id="mingcheng">
            </div>
            <!--<div class="layui-form-mid layui-word-aux">辅助文字</div>-->
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">销售价</label>
            <div class="layui-input-inline">
                <input type="text" name="password" required lay-verify="required" placeholder="请输入销售价" autocomplete="off" class="layui-input" id="xiaoshoujia">
            </div>
            <!--<div class="layui-form-mid layui-word-aux">辅助文字</div>-->
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">促销价</label>
            <div class="layui-input-inline">
                <input type="text" name="password" required lay-verify="required" placeholder="请输入促销价" autocomplete="off" class="layui-input" id="chuxiaojia">
            </div>
            <!--<div class="layui-form-mid layui-word-aux">辅助文字</div>-->
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">库存</label>
            <div class="layui-input-inline">
                <input type="text" name="password" required lay-verify="required" placeholder="请输入库存" autocomplete="off" class="layui-input" id="kucun">
            </div>
            <!--<div class="layui-form-mid layui-word-aux">辅助文字</div>-->
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">食物分类</label>
            <div class="layui-input-block">
                <select name="city" lay-verify="required">
                    <option value="0" id="0"></option>
                    <option value="1">家常菜谱</option>
                    <option value="2">西式快餐</option>
                    <option value="3">火锅/干锅</option>
                    <option value="4">米面菜谱</option>
                    <option value="5">日本料理</option>
                    <option value="6">东南亚菜</option>
                    <option value="7">意大利餐</option>
                    <option value="8">法国菜谱</option>
                    <option value="9">时尚饮品</option>
                    <option value="10">甜点点心</option>
                    <option value="11">其他菜系</option>
                </select>
            </div>
        </div>
        <!--<div class="layui-form-item">-->
            <!--<label class="layui-form-label">食物分类</label>-->
            <!--<div class="layui-input-block">-->
                <!--<input type="checkbox" name="like[write]" title="写作">-->
                <!--<input type="checkbox" name="like[read]" title="阅读" checked>-->
                <!--<input type="checkbox" name="like[dai]" title="发呆">-->
            <!--</div>-->
        <!--</div>-->
        <div class="layui-form-item">
            <label class="layui-form-label">上下架</label>
            <div class="layui-input-block">
                <input type="checkbox" name="switch" lay-skin="switch" lay-text="上架中|已下架" id="shangxiajia" checked>
            </div>
        </div>
        <!--<div class="layui-form-item">-->
            <!--<label class="layui-form-label">单选框</label>-->
            <!--<div class="layui-input-block">-->
                <!--<input type="radio" name="sex" value="男" title="男">-->
                <!--<input type="radio" name="sex" value="女" title="女" checked>-->
            <!--</div>-->
        <!--</div>-->
        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label">商品简介</label>
            <div class="layui-input-block">
                <textarea name="desc" placeholder="请输入商品简介" class="layui-textarea" id="jianjie" id="jianjie"></textarea>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-input-block">
                <button class="layui-btn" lay-submit lay-filter="formDemo" data-method="confirmTrans" id="tijiao">立即提交</button>
                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
        </div>
    </form>
    </div>
    <script>
        var id = location.href.split("?")[1];
        var context=$("#shangxiajia em").html();
        var categoryId="";
        var CateName="";
        console.log(context);
        var json = {
            id: id
        };
        json = JSON.stringify(json);
        $.ajax({
            type: "POST",
            url: "/findFoodById",
            contentType: "application/json; charset=utf-8",
            data: json,
            async: false,
            dataType: "json",
            success: function (info) {
                console.log(info);
                var foodName=info.food.foodName;
                var foodPrice=info.food.foodPrice;
                var foodBargain=info.food.foodBargain;
                var foodDescribe=info.food.foodDescribe;
                var foodState=info.food.foodState;
                var stock=info.food.stock;
                categoryId=info.food.categoryId;
                $("#mingcheng").val(foodName);
                $("#xiaoshoujia").val(foodPrice);
                $("#chuxiaojia").val(foodBargain);
                $("#jianjie").val(foodDescribe);
                $("#kucun").val(stock);

                // $("#xiaoshoujia").attr("placeholder",foodPrice);
                // $("#foodBargain").attr("placeholder",foodBargain);
            },
            error: function (message) {
                $("#request-process-patent").html("获取数据失败！");
            }
        });
        var json = {
            categoryId: categoryId
        };
        json = JSON.stringify(json);
        $.ajax({
            type: "POST",
            url: "/findFoodCateGory",
            contentType: "application/json; charset=utf-8",
            data: json,
            async: false,
            dataType: "json",
            success: function (info) {
                CateName=info.CateName;
                console.log(CateName)
                $("#0").text(CateName);
            },
            error: function (message) {
                $("#request-process-patent").html("获取数据失败！");
            }
        });
        $("#tijiao").click(function () {
            var name=$("#mingcheng").val();
            var xiaoshou=$("#xiaoshoujia").val();
            var chuxiaojia=$("#chuxiaojia").val();
            var jianjie=$("#jianjie").val();
            var kucun=$("#kucun").val();
            var json = {
                categoryId: categoryId,
                foodPrice:xiaoshou,
                foodBargain:chuxiaojia,
                foodDescribe:jianjie,
                foodName:name,
                stock:kucun
            };
            json = JSON.stringify(json);
            $.ajax({
                type: "POST",
                url: "/restaurantUpdateFood",
                contentType: "application/json; charset=utf-8",
                data: json,
                async: false,
                dataType: "json",
                success: function (info) {
                    CateName=info.CateName;
                    console.log(CateName)
                    $("#0").text(CateName);
                },
                error: function (message) {
                    $("#request-process-patent").html("获取数据失败！");
                }
            });
        })
        //Demo
        layui.use('form', function(){
            var form = layui.form;

            //监听提交
            form.on('submit(formDemo)', function(data){
                layer.msg(JSON.stringify(data.field));
                return false;
            });
            // //触发事件
            // var active = {
            //     confirmTrans: function(){
            //         //配置一个透明的询问框
            //         layer.msg( {
            //             time: 20000, //20s后自动关闭
            //             btn: ['明白了', '知道了', '哦']
            //         });
            //     }
            // }
        });

    </script>
    </body>
</html>